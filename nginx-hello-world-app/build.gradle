/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/8.0/samples
 */
plugins {
    id 'java'
    id 'com.bmuschko.docker-remote-api' version '6.1.3'
    id 'org.eclipse.jkube.kubernetes' version '1.10.1'
}

// Import task types
import com.bmuschko.gradle.docker.tasks.container.*
import com.bmuschko.gradle.docker.tasks.image.*


kubernetes {
  images {
    image{
        name = 'gradle-nginx-hello-workld:latest'
    }   
  }
}

task buildMyAppImage(type: DockerBuildImage) {
    inputDir = file('./')
    images.add("gradle-nginx-hello-workld:latest")
}

task pushImage(type: DockerPushImage) {
    dependsOn buildMyAppImage
}